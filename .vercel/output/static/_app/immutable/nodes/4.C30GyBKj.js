import{s as z,n as T,c as D,g as I,a as F,r as G}from"../chunks/scheduler.CkRtTmwH.js";import{S as J,i as K,e as g,s as B,m as M,c as k,a as C,d,f as H,g as m,k as E,n as U,h as w,o as O,p as y,q as Q,t as b,b as v,r as R,j as N}from"../chunks/index.BB8-Jmkb.js";import{e as S,l as q,a as A}from"../chunks/store.D22OMOaH.js";import{p as V}from"../chunks/stores.BmlZQAQW.js";import{g as W}from"../chunks/entry.CYsIcOHn.js";function P(u,e,l){const a=u.slice();return a[9]=e[l],a}function X(u){let e;return{c(){e=b("Turno no encontrado")},l(l){e=v(l,"Turno no encontrado")},m(l,a){m(l,e,a)},p:T,d(l){l&&d(e)}}}function Y(u){let e,l=u[0].fecha+"",a,_,o=u[0].hora+"",s;return{c(){e=b("Asignar Mec치nico al Turno "),a=b(l),_=b(" - "),s=b(o)},l(t){e=v(t,"Asignar Mec치nico al Turno "),a=v(t,l),_=v(t," - "),s=v(t,o)},m(t,n){m(t,e,n),m(t,a,n),m(t,_,n),m(t,s,n)},p(t,n){n&1&&l!==(l=t[0].fecha+"")&&N(a,l),n&1&&o!==(o=t[0].hora+"")&&N(s,o)},d(t){t&&(d(e),d(a),d(_),d(s))}}}function L(u){let e,l,a="Seleccione un mec치nico",_,o,s="Asignar Mec치nico",t,n,f=S(u[2]),p=[];for(let r=0;r<f.length;r+=1)p[r]=j(P(u,f,r));return{c(){e=g("select"),l=g("option"),l.textContent=a;for(let r=0;r<p.length;r+=1)p[r].c();_=B(),o=g("button"),o.textContent=s,this.h()},l(r){e=k(r,"SELECT",{});var c=C(e);l=k(c,"OPTION",{"data-svelte-h":!0}),E(l)!=="svelte-1m45p04"&&(l.textContent=a);for(let i=0;i<p.length;i+=1)p[i].l(c);c.forEach(d),_=H(r),o=k(r,"BUTTON",{"data-svelte-h":!0}),E(o)!=="svelte-vch1q0"&&(o.textContent=s),this.h()},h(){l.__value="",U(l,l.__value),l.disabled=!0,u[1]===void 0&&F(()=>u[4].call(e))},m(r,c){m(r,e,c),w(e,l);for(let i=0;i<p.length;i+=1)p[i]&&p[i].m(e,null);O(e,u[1],!0),m(r,_,c),m(r,o,c),t||(n=[y(e,"change",u[4]),y(o,"click",u[3])],t=!0)},p(r,c){if(c&4){f=S(r[2]);let i;for(i=0;i<f.length;i+=1){const h=P(r,f,i);p[i]?p[i].p(h,c):(p[i]=j(h),p[i].c(),p[i].m(e,null))}for(;i<p.length;i+=1)p[i].d(1);p.length=f.length}c&6&&O(e,r[1])},d(r){r&&(d(e),d(_),d(o)),Q(p,r),t=!1,G(n)}}}function j(u){let e,l=u[9].nombre+"",a;return{c(){e=g("option"),a=b(l),this.h()},l(_){e=k(_,"OPTION",{});var o=C(e);a=v(o,l),o.forEach(d),this.h()},h(){e.__value=u[9].nombre,U(e,e.__value)},m(_,o){m(_,e,o),w(e,a)},p:T,d(_){_&&d(e)}}}function Z(u){let e,l,a;function _(n,f){return n[0]?Y:X}let o=_(u),s=o(u),t=u[0]&&L(u);return{c(){e=g("h1"),s.c(),l=B(),t&&t.c(),a=M()},l(n){e=k(n,"H1",{});var f=C(e);s.l(f),f.forEach(d),l=H(n),t&&t.l(n),a=M()},m(n,f){m(n,e,f),s.m(e,null),m(n,l,f),t&&t.m(n,f),m(n,a,f)},p(n,[f]){o===(o=_(n))&&s?s.p(n,f):(s.d(1),s=o(n),s&&(s.c(),s.m(e,null))),n[0]?t?t.p(n,f):(t=L(n),t.c(),t.m(a.parentNode,a)):t&&(t.d(1),t=null)},i:T,o:T,d(n){n&&(d(e),d(l),d(a)),s.d(),t&&t.d(n)}}}function x(u,e,l){let a;D(u,V,c=>l(5,a=c));let{id:_}=a.params,o=null,s=null;const t=parseInt(_);o=I(q).find(c=>c.id===t),o||console.error("Turno no encontrado");let f=I(A).filter(c=>c.estado==="libre");function p(){q.update(c=>{const i=c.findIndex(h=>h.id===t);return i!==-1&&(c[i].mecanico=s),c}),A.update(c=>{const i=c.findIndex(h=>h.nombre===s);return i!==-1&&(c[i].estado="ocupado"),c}),W("/turnos/list")}function r(){s=R(this),l(1,s),l(2,f)}return[o,s,f,p,r]}class oe extends J{constructor(e){super(),K(this,e,x,Z,z,{})}}export{oe as component};
